<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>E-Ambulance</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<style>
  :root{
    --brand:#cc924f;
    --brand-ink:#1a0c0c;
    --ink:#1f1f1f;
    --muted:#6b6b6b;
    --bg:#faf8f5;
    --card:#ffffff;
    --ring: rgba(204,146,79,.35);
  }

  /* --- Global --- */
  html,body{background:var(--bg); color:var(--ink);}
  .container, .container-fluid{max-width:1200px;}
  h1,h2,h3,h4{letter-spacing:.3px}
  a{transition:all .2s ease}

  /* --- Navbar --- */
  .navbar{background:var(--brand)!important; backdrop-filter:saturate(120%) blur(2px)}
  .navbar .navbar-brand{
    color:#fff!important; font-weight:800; letter-spacing:.5px;
  }
  .navbar .nav-link{
    color:#fff!important; font-weight:600; border-radius:10px; padding:.55rem .9rem;
    opacity:.95;
  }
  .navbar .nav-link:hover{background:#fff;color:var(--brand) !important; box-shadow:0 6px 18px rgba(0,0,0,.07)}

  /* --- Hero / Welcome --- */
  .page-welcome{
    background: radial-gradient(1200px 400px at 10% -10%, rgba(204,146,79,.15), transparent 60%),
                radial-gradient(800px 400px at 100% 0%, rgba(204,146,79,.12), transparent 60%);
    border:1px solid rgba(204,146,79,.18);
    border-radius:18px;
    padding:28px;
    box-shadow:0 10px 30px rgba(0,0,0,.06);
  }
  .page-welcome h2{
    font-weight:800;
  }
  .page-welcome p{color:var(--muted); margin-bottom:.2rem}

  /* --- Section titles --- */
  .section-title{
    display:flex; align-items:center; gap:.6rem; margin:2.2rem 0 1rem;
    font-weight:800;
  }
  .section-title::after{
    content:""; flex:1; height:2px; background:linear-gradient(90deg,var(--brand),transparent);
    border-radius:2px; opacity:.4;
  }

  /* --- Cards (requests / ambulances / drivers) --- */
  .card{
    border:1px solid rgba(0,0,0,.04);
    border-radius:16px;
    background:var(--card);
    box-shadow:0 10px 24px rgba(0,0,0,.06);
    transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease;
  }
  .card:hover{
    transform:translateY(-4px);
    box-shadow:0 16px 36px rgba(0,0,0,.10);
    border-color: var(--ring);
  }
  .card .card-title{font-weight:800; letter-spacing:.2px}
  .card .badge{font-size:.8rem; padding:.5rem .7rem; border-radius:999px}
  .shadow{box-shadow:0 10px 24px rgba(0,0,0,.06)!important}

  /* --- Buttons --- */
  .btn{
    border-radius:12px; font-weight:700; letter-spacing:.2px;
    padding:.55rem 1rem; box-shadow:0 6px 16px rgba(0,0,0,.06);
  }
  .btn-outline-dark:hover{box-shadow:0 12px 26px rgba(0,0,0,.15)}
  .btn-primary, .btn-outline-primary:hover{
    background:var(--brand); border-color:var(--brand);
  }
  .btn-outline-primary{color:var(--brand); border-color:var(--brand)}

  /* --- Quick Links (cards as links) --- */
  .card.text-center.text-decoration-none{
    border:1px solid rgba(204,146,79,.15);
  }
  .card.text-center.text-decoration-none:hover{
    border-color:var(--brand);
  }

  /* --- Badges polish --- */
  .badge.bg-warning.text-dark{background:linear-gradient(#ffd769,#ffbd3c)}
  .badge.bg-primary{background:linear-gradient(#7aa6ff,#356dff)}
  .badge.bg-success{background:linear-gradient(#6bd08b,#35b868)}
  .badge.bg-danger{background:linear-gradient(#ff8080,#ff5454)}
  .badge.bg-info{background:linear-gradient(#7dd8ff,#49c2f0)}

  /* --- Lists & grids --- */
  .row.g-4 > [class*="col-"]{display:flex}
  .row.g-4 .card{width:100%}

  /* --- Footer --- */
  footer{
    background:var(--brand); color:var(--brand-ink);
    border-top:1px solid rgba(0,0,0,.06);
    box-shadow:0 -8px 24px rgba(0,0,0,.05) inset;
  }
  footer a{color:#110d07; font-weight:700}
  footer a:hover{text-decoration:underline}

  /* --- Utilities --- */
  .pill{border-radius:999px}
  .ring{box-shadow:0 0 0 4px var(--ring)}
  .muted{color:var(--muted)}

  /* --- Small motion (reduced-motion friendly) --- */
  @media (prefers-reduced-motion:no-preference){
    .fade-up{opacity:0; transform:translateY(10px); animation:fadeUp .5s ease forwards}
    .fade-in{opacity:0; animation:fadeIn .45s ease forwards}
  }
  @keyframes fadeUp{to{opacity:1; transform:none}}
  @keyframes fadeIn{to{opacity:1}}
  
  /* --- Responsive tweaks --- */
  @media (max-width: 991.98px){
    .navbar .nav-link{padding:.5rem .75rem}
    .page-welcome{padding:20px}
  }

.quick-links-card {
  background: #ffffff;
  border-radius: 18px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  padding: 20px 25px;
  margin: 20px 0;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.quick-links-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 25px rgba(0,0,0,0.15);
}

.quick-links-card h4 {
  font-weight: 700;
  font-size: 1.3rem;
  color: #d35400;
  margin-bottom: 15px;
}

.quick-links-card ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.quick-links-card li {
  margin-bottom: 12px;
}

.quick-links-card a {
  display: inline-block;
  padding: 10px 18px;
  background: linear-gradient(90deg, #e67e22, #d35400);
  color: #fff;
  font-weight: 600;
  text-decoration: none;
  border-radius: 25px;
  transition: background 0.3s ease;
}

.quick-links-card a:hover {
  background: linear-gradient(90deg, #d35400, #a84300);
  color: #fff;
}
.request-card {
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  padding: 18px 22px;
  margin-bottom: 20px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.request-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.15);
}

/* Header section */
.request-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.hospital-name {
  font-size: 1.2rem;
  font-weight: 700;
  color: #d35400;
  margin: 0;
}

/* Status badge */
.status-badge {
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  text-transform: capitalize;
  color: #fff;
}

.status-badge.pending {
  background: #f39c12;
}

.status-badge.dispatched,
.status-badge.assigned {
  background: #2980b9;
}

.status-badge.completed {
  background: #27ae60;
}

.status-badge.expired {
  background: #7f8c8d;
}

/* Body section */
.request-body {
  font-size: 0.95rem;
  color: #333;
}

.request-body strong {
  color: #000;
}

/* Track button */
.track-btn {
  display: inline-block;
  margin-top: 12px;
  padding: 8px 16px;
  background: linear-gradient(90deg, #e67e22, #cc924fff);
  color: #fff;
  font-weight: 600;
  border-radius: 25px;
  text-decoration: none;
  transition: background 0.3s ease;
}

.track-btn:hover {
  background: linear-gradient(90deg, #cc924fff, #cc924fff);
}
/* Footer styling */
footer {
  background: #cc924fff;
  color: #fff;
  padding: 9px 0;
  text-align: center;
  margin-top: 16px;   /* pushes footer to bottom */
}

/* Footer links */
footer a {
  color: #fff;
  text-decoration: underline;
}

footer a:hover {
  color: #cc924fff;
}

/* Ensure page uses full height */
html, body {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* Content wrapper to push footer down */
.container, .content {
  flex: 1;
}

</style>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg" style="background-color: #cc924fff;">
    <div class="container-fluid">
      <a class="navbar-brand" href="/"> E-Ambulance</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <!-- Static Pages -->
           <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'about' %}">About Us</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact Us</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'ambulance_types' %}">Ambulance Types</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'feedback' %}">Feedback</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'costs' %}">Ambulance Costs</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
          <!-- User Accounts -->
          <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Register</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
          <!-- Dashboard -->
         <a class="nav-link" href="{% url 'chat_entry' %}">Chat</a>

</li>

        </ul>
      </div>
    </div>
  </nav>

  <!-- Page Content -->
  <div class="container mt-4">
  {% block content %}
  <div class="container mt-5">
    <h2>Welcome, {{ user.firstname }} {{ user.lastname }} </h2>
    <p>Email: {{ user.email }}</p>
    <p>Phone: {{ user.phonenumber }}</p>

    <hr>
    <hr>
<div class="quick-links-card">
  <h4>Quick Links</h4>
  <ul>
    <li><a href="{% url 'emergency_request' %}">Request Ambulance </a></li>
  </ul>
</div>
    <!-- My Requests -->
  {% for req in requests %}
  <div class="request-card mb-4">
    <div class="request-header">
      <h5 class="hospital-name">{{ req.hospital_name }}</h5>
      <span class="status-badge {{ req.status|lower }}">
        {{ req.status }}
      </span>

    </div>
    <div class="request-body">
      <p>
        <strong>Request Type:</strong> {{ req.request_type|title }} <br>
        <strong>Hospital Address:</strong> {{ req.hospital_address }}
      </p>
      <a href="{% url 'track_request' req.id %}" class="track-btn">
         Track Ambulance
      </a>
      <a href="{% url 'user_chat' req.id %}" class="track-btn" style="margin-left:8px;">
         Open Chat
      </a>

    </div>
  </div>
{% empty %}
  <p>No emergency requests yet.</p>
{% endfor %}
    
   <!-- Available Ambulances -->
<h4 class="mt-5 mb-3 text-center">Available Ambulances</h4>
<div class="row g-4">
  {% for ambulance in ambulances %}
    <div class="col-md-4">
      <div class="card shadow text-center h-100">
        <div class="card-body">
          <h5 class="card-title">{{ ambulance.vehicle_number }}</h5>
          <p><strong>Type:</strong> {{ ambulance.equipment_level }}</p>
          <p>
            <strong>Status:</strong>
            {% if ambulance.current_status|lower == 'available' %}
              <span class="badge bg-success">Available</span>
            {% else %}
              <span class="badge bg-danger">{{ ambulance.current_status }}</span>
            {% endif %}
          </p>
          <a href="{% url 'emergency_request' %}" 
             class="btn btn-outline-primary btn-sm mt-2">
             Book Now
          </a>
        </div>
      </div>
    </div>
  {% empty %}
    <p class="text-muted">No ambulances available at the moment.</p>
  {% endfor %}
</div>
  </div>

    <!-- 👨‍✈️ Drivers List -->
    <h4 class="mt-5 mb-3 text-center">Drivers List</h4>
    <div class="row g-4">
      {% for driver in drivers %}
        <div class="col-md-4">
          <div class="card shadow text-center h-100">
            <div class="card-body">
              <h5 class="card-title">{{ driver.firstname }} {{ driver.lastname }}</h5>
              <p><strong>Contact:</strong> {{ driver.phonenumber }}</p>
            </div>
          </div>
        </div>
      {% empty %}
        <p class="text-muted">No drivers available at the moment.</p>
      {% endfor %}
    </div>
  </div>
  {% endblock %}
</div>

  <footer>
    <p class="mb-1">© 2025 E-Ambulance. All Rights Reserved.</p>
    <p class="mb-0">Made with ❤️ to save lives | <a href="{% url 'contact' %}">Contact Us</a></p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
